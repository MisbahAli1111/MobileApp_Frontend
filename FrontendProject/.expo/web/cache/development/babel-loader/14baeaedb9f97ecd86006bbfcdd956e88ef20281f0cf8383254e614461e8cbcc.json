{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport ProfileDropdown from \"./ProfilePopDown\";\nimport { Color } from \"../GlobalStyles\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport axios from \"axios\";\nimport { AntDesign } from \"@expo/vector-icons\";\nimport Config from \"../screens/Config\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Header = function Header(_ref) {\n  var title = _ref.title,\n    showBackArrow = _ref.showBackArrow,\n    profileImage = _ref.profileImage,\n    onBackPress = _ref.onBackPress;\n  var navigation = useNavigation();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isProfileDropdownVisible = _useState2[0],\n    setProfileDropdownVisible = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    userId = _useState4[0],\n    setUserId = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    profileImageLink = _useState6[0],\n    setProfileImageLink = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    loading = _useState8[0],\n    setLoading = _useState8[1];\n  var handleProfileImagePress = function handleProfileImagePress() {\n    setProfileDropdownVisible(function (prevState) {\n      return !prevState;\n    });\n  };\n  var getProfileImage = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var accessTokens = yield AsyncStorage.getItem(\"accessToken\");\n        var token = \"Bearer \" + accessTokens;\n        var storedUserId = yield AsyncStorage.getItem(\"userId\");\n        setUserId(storedUserId);\n        if (profileImageLink == null) {\n          setLoading(true);\n        }\n        if (userId) {\n          var config = {\n            method: \"get\",\n            maxBodyLength: Infinity,\n            url: `${Config.apiServerUrl}/api/users/${userId}/profile-image`,\n            headers: {\n              Authorization: token\n            }\n          };\n          var response = yield axios.request(config);\n          if (response.status === 200) {\n            var responseData = response.data;\n            if (responseData.url !== null) {\n              setProfileImageLink(`${Config.baseUrl1}` + responseData.url);\n            }\n          } else {\n            console.log(\"Error: \" + response.statusText);\n          }\n        }\n      } catch (error) {\n        console.log(\"Error fetching profile image:\", error);\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function getProfileImage() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    getProfileImage();\n  }, [userId]);\n  return _jsx(ImageBackground, {\n    source: require(\"../assets/light-texture2234-1.png\"),\n    style: styles.backgroundImage,\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [showBackArrow ? _jsx(TouchableOpacity, {\n        style: styles.backButton,\n        onPress: function onPress() {\n          return navigation.navigate(onBackPress);\n        },\n        children: _jsx(Image, {\n          source: require(\"../assets/vector2.png\"),\n          style: styles.arrowImage\n        })\n      }) : _jsx(View, {\n        style: styles.placeholderImage\n      }), _jsx(Text, {\n        style: styles.title,\n        children: title\n      }), loading ? _jsx(ActivityIndicator, {\n        size: \"small\",\n        color: \"black\"\n      }) : profileImage === \"Yes\" ? profileImageLink ? _jsx(TouchableOpacity, {\n        onPress: handleProfileImagePress,\n        children: _jsx(Image, {\n          source: {\n            uri: profileImageLink\n          },\n          style: styles.profileImage\n        })\n      }) : _jsx(TouchableOpacity, {\n        onPress: handleProfileImagePress,\n        children: _jsx(View, {\n          style: styles.profileImage,\n          children: _jsx(AntDesign, {\n            name: \"user\",\n            size: 25,\n            color: \"black\"\n          })\n        })\n      }) : _jsx(View, {\n        style: styles.placeholderImage\n      }), isProfileDropdownVisible && _jsx(ProfileDropdown, {})]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  backgroundImage: {\n    flex: 1,\n    resizeMode: \"cover\"\n  },\n  container: {\n    top: 40,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    height: 60,\n    backgroundColor: \"transparent\"\n  },\n  title: {\n    flex: 1,\n    fontSize: 20,\n    fontWeight: \"700\",\n    textAlign: \"center\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  backButton: {\n    paddingHorizontal: 15\n  },\n  arrowImage: {\n    width: 20,\n    height: 20,\n    resizeMode: \"contain\"\n  },\n  profileImage: {\n    width: 30,\n    height: 30,\n    borderRadius: 20,\n    marginRight: 15\n  },\n  placeholderImage: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    marginRight: 15\n  }\n});\nexport default Header;","map":{"version":3,"names":["React","useState","useEffect","View","Text","Image","TouchableOpacity","StyleSheet","ImageBackground","ActivityIndicator","useNavigation","ProfileDropdown","Color","AsyncStorage","axios","AntDesign","Config","jsx","_jsx","jsxs","_jsxs","Header","_ref","title","showBackArrow","profileImage","onBackPress","navigation","_useState","_useState2","_slicedToArray","isProfileDropdownVisible","setProfileDropdownVisible","_useState3","_useState4","userId","setUserId","_useState5","_useState6","profileImageLink","setProfileImageLink","_useState7","_useState8","loading","setLoading","handleProfileImagePress","prevState","getProfileImage","_ref2","_asyncToGenerator","accessTokens","getItem","token","storedUserId","config","method","maxBodyLength","Infinity","url","apiServerUrl","headers","Authorization","response","request","status","responseData","data","baseUrl1","console","log","statusText","error","apply","arguments","source","require","style","styles","backgroundImage","children","container","backButton","onPress","navigate","arrowImage","placeholderImage","size","color","uri","name","create","flex","resizeMode","top","flexDirection","alignItems","height","backgroundColor","fontSize","fontWeight","textAlign","justifyContent","paddingHorizontal","width","borderRadius","marginRight"],"sources":["C:/Users/DELL/Documents/frontend-car-maintenance/FrontendProject/components/Header.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  Image,\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  ImageBackground,\r\n  ActivityIndicator,\r\n} from \"react-native\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport ProfileDropdown from \"./ProfilePopDown\";\r\nimport { Color } from \"../GlobalStyles\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport axios from \"axios\";\r\nimport { AntDesign } from \"@expo/vector-icons\";\r\nimport Config from \"../screens/Config\";\r\n\r\nconst Header = ({ title, showBackArrow, profileImage, onBackPress }) => {\r\n  const navigation = useNavigation();\r\n  const [isProfileDropdownVisible, setProfileDropdownVisible] = useState(false);\r\n  const [userId, setUserId] = useState(\"\");\r\n  const [profileImageLink, setProfileImageLink] = useState(\"\");\r\n  const [loading, setLoading] = useState(false); // Add loading state\r\n\r\n  const handleProfileImagePress = () => {\r\n    setProfileDropdownVisible((prevState) => !prevState);\r\n  };\r\n\r\n  const getProfileImage = async () => {\r\n    try {\r\n      const accessTokens = await AsyncStorage.getItem(\"accessToken\");\r\n      const token = \"Bearer \" + accessTokens;\r\n      const storedUserId = await AsyncStorage.getItem(\"userId\");\r\n      setUserId(storedUserId);\r\n      if (profileImageLink == null) {\r\n        setLoading(true);\r\n      }\r\n\r\n      if (userId) {\r\n        const config = {\r\n          method: \"get\",\r\n          maxBodyLength: Infinity,\r\n          url: `${Config.apiServerUrl}/api/users/${userId}/profile-image`,\r\n          headers: {\r\n            Authorization: token,\r\n          },\r\n        };\r\n\r\n        const response = await axios.request(config);\r\n\r\n        if (response.status === 200) {\r\n          const responseData = response.data;\r\n          if (responseData.url !== null) {\r\n            setProfileImageLink(`${Config.baseUrl1}` + responseData.url);\r\n          }\r\n        } else {\r\n          console.log(\"Error: \" + response.statusText);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error fetching profile image:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getProfileImage();\r\n  }, [userId]); \r\n\r\n  return (\r\n    <ImageBackground\r\n      source={require(\"../assets/light-texture2234-1.png\")}\r\n      style={styles.backgroundImage}\r\n    >\r\n      <View style={styles.container}>\r\n        {showBackArrow ? (\r\n          <TouchableOpacity\r\n            style={styles.backButton}\r\n            onPress={() => navigation.navigate(onBackPress)}\r\n          >\r\n            <Image\r\n              source={require(\"../assets/vector2.png\")}\r\n              style={styles.arrowImage}\r\n            />\r\n          </TouchableOpacity>\r\n        ) : (\r\n          <View style={styles.placeholderImage} />\r\n        )}\r\n        <Text style={styles.title}>{title}</Text>\r\n        \r\n\r\n        {loading ? (\r\n          <ActivityIndicator size=\"small\" color=\"black\" />\r\n        ) : profileImage === \"Yes\" ? (\r\n          profileImageLink ? (\r\n            <TouchableOpacity onPress={handleProfileImagePress}>\r\n              <Image\r\n                source={{ uri: profileImageLink }}\r\n                style={styles.profileImage}\r\n              />\r\n            </TouchableOpacity>\r\n          ) : (\r\n            <TouchableOpacity onPress={handleProfileImagePress}>\r\n              {/* Display the Ant Design user icon when profileImageLink is null */}\r\n              <View style={styles.profileImage}>\r\n                <AntDesign name=\"user\" size={25} color=\"black\" />\r\n              </View>\r\n            </TouchableOpacity>\r\n          )\r\n        ) : (\r\n          // Display the placeholder <View> when profileImage is \"No\"\r\n          <View style={styles.placeholderImage} />\r\n        )}\r\n\r\n        {isProfileDropdownVisible && <ProfileDropdown />}\r\n      </View>\r\n    </ImageBackground>\r\n  );\r\n};\r\n\r\n// Styles and export remain unchanged\r\nconst styles = StyleSheet.create({\r\n  backgroundImage: {\r\n    flex: 1,\r\n    resizeMode: \"cover\",\r\n  },\r\n  container: {\r\n    top: 40,\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    height: 60,\r\n    backgroundColor: \"transparent\", // Make the background transparent so that the image background is visible\r\n    // borderBottomWidth: 0.5,\r\n    // borderBottomColor: Color.steelblue_200,\r\n  },\r\n  title: {\r\n    flex: 1,\r\n    fontSize: 20,\r\n    fontWeight: \"700\",\r\n    textAlign: \"center\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  backButton: {\r\n    paddingHorizontal: 15,\r\n  },\r\n  arrowImage: {\r\n    width: 20,\r\n    height: 20,\r\n    resizeMode: \"contain\",\r\n  },\r\n  profileImage: {\r\n    width: 30,\r\n    height: 30,\r\n    borderRadius: 20,\r\n    marginRight: 15,\r\n  },\r\n  placeholderImage: {\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: 20,\r\n    marginRight: 15,\r\n  },\r\n});\r\n\r\nexport default Header;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}